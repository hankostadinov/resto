<!doctype html>
<html lang="bg">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ресто в евро (по курс 1.95583)</title>
  <style>
    :root{
      --bg:#f6f8fc;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --border: rgba(15,23,42,.14);
      --shadow: 0 18px 40px rgba(2,6,23,.12);
      --radius: 16px;
      --brand:#2563eb;
      --brand2:#16a34a;
      --warn:#b91c1c;
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 520px at 15% -10%, rgba(37,99,235,.14), transparent 60%),
        radial-gradient(800px 520px at 95% 10%, rgba(22,163,74,.12), transparent 55%),
        var(--bg);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 22px;
    }
    .card{
      width: min(680px, 100%);
      background: var(--card);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px;
    }
    h1{font-size: 20px; margin:0 0 10px}
    .hint{color: var(--muted); margin:0 0 14px; font-size:14px}
    .grid{display:grid; gap:12px}
    label{font-size: 13px; color: var(--muted)}
    input{
      width:100%;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #fff;
      color: var(--text);
      outline: none;
      font-size: 16px;
    }
    input:focus{
      border-color: rgba(37,99,235,.55);
      box-shadow: 0 0 0 4px rgba(37,99,235,.12);
    }
    .row{display:grid; gap:8px}

    .note{
      font-size: 13px;
      color: var(--muted);
      margin-top: 2px;
    }

    .banknotes{
      display:grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap:10px;
      margin-top: 8px;
    }
    .bn{
      border: 1px solid var(--border);
      border-radius: 14px;
      background: #fff;
      padding: 10px;
      cursor: pointer;
      display:grid;
      gap:8px;
      align-content:start;
      transition: transform .08s ease, border-color .12s ease, box-shadow .12s ease;
      user-select:none;
    }
    .bn:hover{
      border-color: rgba(37,99,235,.35);
      box-shadow: 0 10px 25px rgba(2,6,23,.08);
      transform: translateY(-1px);
    }
    .bn:active{transform: translateY(0px) scale(.99)}
    .bn img{
      width:100%;
      height:72px;
      object-fit:cover;
      border-radius: 10px;
      border: 1px solid rgba(15,23,42,.10);
      background: linear-gradient(135deg, rgba(37,99,235,.10), rgba(22,163,74,.08));
    }
    .bn .cap{
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-weight:800;
      font-variant-numeric: tabular-nums;
      font-size: 14px;
    }
    .bn .cap span{color: var(--muted); font-weight:700}

    .result{
      margin-top: 10px;
      padding: 14px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(37,99,235,.06);
    }
    .big{
      font-size: 34px;
      font-weight: 900;
      letter-spacing: -.5px;
      margin: 2px 0 4px;
      line-height: 1.1;
      font-variant-numeric: tabular-nums;
    }
    .small{color: var(--muted); font-size: 13px}
    .warn{color: var(--warn)}

    .btns{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
    button{
      cursor:pointer;
      border:1px solid var(--border);
      background: #fff;
      color: var(--text);
      padding: 11px 14px;
      border-radius: 12px;
      font-weight: 800;
      transition: border-color .12s ease, box-shadow .12s ease, transform .08s ease;
    }
    button:hover{
      border-color: rgba(37,99,235,.35);
      box-shadow: 0 10px 25px rgba(2,6,23,.08);
      transform: translateY(-1px);
    }
    button:active{transform: translateY(0px)}
    .primary{
      border-color: transparent;
      background: linear-gradient(135deg, rgba(37,99,235,.95), rgba(22,163,74,.85));
      color:#fff;
    }
    .ghost{
      background: rgba(2,6,23,.03);
    }

    @media (max-width: 720px){
      .banknotes{grid-template-columns: repeat(2, minmax(0, 1fr));}
    }
  </style>
</head>
<body>
  <main class="card">
    <h1>Ресто в евро</h1>
    <p class="hint">
      Въвеждаш сметката (лв) и даденото (лв). Получаваш ресто в <b>EUR</b> по курс <b>1.95583</b>.
    </p>

    <div class="grid">
      <div class="row">
        <label for="bill">Обща сметка на клиента (лв)</label>
        <input id="bill" inputmode="decimal" placeholder="напр. 23.40" />
      </div>

      <div class="row">
        <label for="paid">Дадени пари от клиента (лв)</label>
        <input id="paid" inputmode="decimal" placeholder="напр. 50.00" />
        <div class="note">Бързи банкноти: натисни за да добавиш към “Дадени пари”.</div>

        <!-- Снимкови бутони (банкноти) -->
        <div class="banknotes" id="banknotes">
          <!-- Смени src с твоите картинки -->
          <button class="bn" type="button" data-value="2">
            <img src="images/2lv.jpg" alt="2 лв" />
            <div class="cap"><strong>2</strong><span>лв</span></div>
          </button>

          <button class="bn" type="button" data-value="5">
            <img src="images/5lv.jpg" alt="5 лв" />
            <div class="cap"><strong>5</strong><span>лв</span></div>
          </button>

          <button class="bn" type="button" data-value="10">
            <img src="images/10lv.jpg" alt="10 лв" />
            <div class="cap"><strong>10</strong><span>лв</span></div>
          </button>

          <button class="bn" type="button" data-value="20">
            <img src="images/20lv.jpg" alt="20 лв" />
            <div class="cap"><strong>20</strong><span>лв</span></div>
          </button>
        </div>

        <div class="btns" style="margin-top:10px">
          <button class="ghost" id="clearPaidBtn" type="button">Изчисти дадено</button>
        </div>
      </div>

      <div class="result" aria-live="polite">
        <div class="small">Ресто за връщане (EUR)</div>
        <div id="eur" class="big">0.00</div>
        <div id="info" class="small"></div>
      </div>

      <div class="btns">
        <button class="primary" id="calcBtn" type="button">Изчисли</button>
        <button id="clearAllBtn" type="button">Изчисти всичко</button>
      </div>
    </div>
  </main>

  <script>
    const RATE = 1.95583; // BGN per 1 EUR

    const billEl = document.getElementById('bill');
    const paidEl = document.getElementById('paid');
    const eurEl  = document.getElementById('eur');
    const infoEl = document.getElementById('info');

    const calcBtn = document.getElementById('calcBtn');
    const clearPaidBtn = document.getElementById('clearPaidBtn');
    const clearAllBtn = document.getElementById('clearAllBtn');
    const banknotesWrap = document.getElementById('banknotes');

    function parseBGNumber(value){
      if (typeof value !== 'string') return NaN;
      const v = value.trim().replace(',', '.');
      return v === '' ? NaN : Number(v);
    }

    function fmt2(n){
      return (Math.round(n * 100) / 100).toFixed(2);
    }

    function setWarn(text){
      infoEl.textContent = text;
      infoEl.classList.add('warn');
    }

    function clearWarn(){
      infoEl.classList.remove('warn');
    }

    function calculate(){
      clearWarn();

      const bill = parseBGNumber(billEl.value);
      const paid = parseBGNumber(paidEl.value);

      if (!Number.isFinite(bill) || !Number.isFinite(paid)) {
        eurEl.textContent = "0.00";
        setWarn("Въведи валидни числа (можеш и със запетая).");
        return;
      }

      const changeBGN = paid - bill;

      if (changeBGN < 0) {
        eurEl.textContent = "0.00";
        setWarn(`Недостатъчна сума: липсват ${fmt2(Math.abs(changeBGN))} лв.`);
        return;
      }

      const changeEUR = changeBGN / RATE;
      eurEl.textContent = fmt2(changeEUR);
      infoEl.textContent = `Ресто: ${fmt2(changeBGN)} лв ÷ ${RATE} = ${fmt2(changeEUR)} EUR`;
    }

    function addToPaid(value){
      const current = parseBGNumber(paidEl.value);
      const next = (Number.isFinite(current) ? current : 0) + value;
      paidEl.value = fmt2(next);
      calculate();
      paidEl.focus();
    }

    // Click on banknote buttons (event delegation)
    banknotesWrap.addEventListener('click', (e) => {
      const btn = e.target.closest('button[data-value]');
      if (!btn) return;
      const v = Number(btn.getAttribute('data-value'));
      if (Number.isFinite(v)) addToPaid(v);
    });

    calcBtn.addEventListener('click', calculate);

    clearPaidBtn.addEventListener('click', () => {
      paidEl.value = '';
      calculate();
      paidEl.focus();
    });

    clearAllBtn.addEventListener('click', () => {
      billEl.value = '';
      paidEl.value = '';
      eurEl.textContent = "0.00";
      infoEl.textContent = '';
      clearWarn();
      billEl.focus();
    });

    // Автоматично пресмятане при писане
    [billEl, paidEl].forEach(el => el.addEventListener('input', calculate));

    // Enter да изчислява
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') calculate();
    });
  </script>
</body>
</html>
